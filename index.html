<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ç¹ªåœ–æç¤ºè©æŒ‡å— (å­¸ç”Ÿç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* ä½¿ç”¨ Noto Sans TC ä½œç‚ºä¸­æ–‡å­—é«”ï¼ŒInter ä½œç‚ºè‹±æ–‡å­—é«” */
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* èªè¨€åˆ‡æ›é–‹é—œæ¨£å¼ */
        .dot {
            /* æ–°å¢ï¼šç‚ºæ»‘å¡Šå¢åŠ æµæš¢çš„éæ¸¡å‹•ç•« */
            transition: transform 0.3s ease-in-out;
        }
        .lang-toggle:checked + .dot {
            transform: translateX(100%);
        }
        .lang-toggle:checked ~ .lang-label-zh {
            font-weight: 400;
            color: #6b7280; /* gray-500 */
        }
        .lang-toggle:checked ~ .lang-label-en {
            font-weight: 700;
            color: #1e40af; /* blue-800 */
        }
        /* åˆå§‹éš±è—è‹±æ–‡å…§å®¹ */
        .lang-en {
            display: none;
        }
        /* è¤‡è£½æŒ‰éˆ•çš„æç¤ºè¨Šæ¯ */
        .copy-feedback::after {
            content: 'å·²è¤‡è£½!';
            position: absolute;
            top: -2rem;
            left: 50%;
            transform: translateX(-50%);
            background-color: #2563eb; /* blue-600 */
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none; /* é˜²æ­¢å½å…ƒç´ å¹²æ“¾é»æ“Š */
        }
        .copy-feedback.show::after {
            opacity: 1;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        <!-- é é¢æ¨™é¡Œå’Œæ§åˆ¶å€ -->
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-slate-900">AI ç¹ªåœ–æç¤ºè©æŒ‡å—</h1>
            <p class="mt-2 text-slate-600">å°ˆç‚ºå‰µæ„å­¸ç¿’è€…è¨­è¨ˆçš„éˆæ„Ÿå·¥å…·</p>
        </header>

        <!-- åŠŸèƒ½å€ -->
        <div class="sticky top-0 bg-slate-50/80 backdrop-blur-lg z-10 py-4 mb-8">
            <div class="max-w-3xl mx-auto bg-white p-4 sm:p-6 rounded-2xl shadow-lg border border-slate-200">
                <div class="flex flex-col sm:flex-row items-center justify-between gap-6">
                    <!-- åˆ†é…æç¤ºè©åŠŸèƒ½ -->
                    <div class="w-full">
                        <h2 class="text-lg font-bold text-slate-800 mb-2">ğŸš€ ç²å–å°ˆå±¬æç¤ºè©</h2>
                        <div class="flex items-center gap-2">
                            <input type="number" id="studentIdInput" min="1" max="18" placeholder="è¼¸å…¥å­¸è™Ÿ (1-18)" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                            <button id="assignBtn" class="px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition shrink-0">ç”Ÿæˆä½œæ¥­</button>
                        </div>
                    </div>
                     <!-- èªè¨€åˆ‡æ› -->
                    <div class="flex items-center gap-3 shrink-0">
                        <span class="lang-label-zh text-blue-800 font-bold">ä¸­æ–‡</span>
                        <label for="langToggle" class="flex items-center cursor-pointer">
                            <div class="relative">
                                <input type="checkbox" id="langToggle" class="sr-only lang-toggle">
                                <div class="block bg-slate-200 w-14 h-8 rounded-full"></div>
                                <div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform"></div>
                            </div>
                        </label>
                        <span class="lang-label-en text-slate-500 font-normal">English</span>
                    </div>
                </div>
                <!-- åˆ†é…çµæœé¡¯ç¤ºå€ -->
                <div id="assignmentResult" class="mt-4 text-sm"></div>
            </div>
        </div>

        <!-- æç¤ºè©æŒ‡å—å…§å®¹ -->
        <main id="promptGuideContainer"></main>

    </div>

    <script>
        // --- è³‡æ–™åº«ï¼šæ‰€æœ‰æç¤ºè© ---
        const promptsData = {
            style: [
                { zh: "çœŸå¯¦æ”å½±", en: "Photorealistic", extra_zh: "é«˜å“è³ª, RAWç…§ç‰‡, ç´°ç¯€è±å¯Œ, 8K, æ™¯æ·±", extra_en: "High quality, RAW photo, highly detailed, 8K, depth of field" },
                { zh: "æš—èª¿æ”å½±", en: "Dark photography / Low key", extra_zh: "ä½èª¿å…‰, é™°å½±, ç¥ç§˜, æˆ²åŠ‡æ€§, å€«å‹ƒæœ—å…‰", extra_en: "Low key lighting, shadows, mysterious, dramatic, Rembrandt lighting" },
                { zh: "é»‘ç™½æ”å½±", en: "Black and white photography", extra_zh: "å–®è‰², é«˜å°æ¯”, ç´€å¯¦, é¡†ç²’æ„Ÿ, æ”å½±æ£š", extra_en: "Monochrome, high contrast, documentary, film grain, studio shot" },
                { zh: "å“¥ç‰¹é¢¨æ ¼", en: "Gothic style", extra_zh: "é»‘æš—, è¯éº—, æ•™å ‚, å¸è¡€é¬¼, ç¥ç§˜æ°›åœ", extra_en: "Dark, ornate, cathedral, vampire, mysterious atmosphere" },
                { zh: "é›»å½±æ„Ÿ", en: "Cinematic", extra_zh: "é›»å½±å…‰æ•ˆ, å¯¬è¢å¹•, æ•…äº‹æ„Ÿ, è‰²å½©åˆ†ç´š, é¡†ç²’æ„Ÿ", extra_en: "Cinematic lighting, widescreen, story telling, color grading, film grain" },
                { zh: "å¤¢å¹»æ„Ÿ", en: "Dreamy / Ethereal", extra_zh: "æŸ”ç„¦, ç™¼å…‰æ•ˆæœ, ç©ºéˆ, ç²‰å½©è‰²èª¿, é­”æ³•å…‰", extra_en: "Soft focus, glowing effect, ethereal, pastel colors, magic light" },
                { zh: "è¶…ç¾å¯¦ä¸»ç¾©", en: "Surrealism", extra_zh: "é”åˆ©é¢¨æ ¼, æ½›æ„è­˜, å¥‡ç•°çµ„åˆ, æ‰­æ›²", extra_en: "Salvador Dali style, subconscious, strange combinations, distorted" },
                { zh: "å°è±¡æ´¾", en: "Impressionism", extra_zh: "è«å…§é¢¨æ ¼, ç­†è§¸æ„Ÿ, å…‰å½±è®ŠåŒ–, æ¨¡ç³Š", extra_en: "Claude Monet style, visible brushstrokes, changing light, blurry" },
                { zh: "æ¥µç°¡ä¸»ç¾©", en: "Minimalism", extra_zh: "ç°¡æ½”ç·šæ¢, å¤§é‡ç•™ç™½, å–®ä¸€ä¸»é«”, ç´”è‰²èƒŒæ™¯", extra_en: "Clean lines, lots of negative space, single subject, solid color background" },
                { zh: "è³½åšé¾å…‹", en: "Cyberpunk", extra_zh: "éœ“è™¹ç‡ˆ, æœªä¾†åŸå¸‚, æ©Ÿæ¢°ç¾©é«”, åçƒæ‰˜é‚¦", extra_en: "Neon lights, futuristic city, cybernetics, dystopian" },
                { zh: "è’¸æ±½é¾å…‹", en: "Steampunk", extra_zh: "ç¶­å¤šåˆ©äºæ™‚ä»£, é½’è¼ª, è’¸æ±½å‹•åŠ›, å¾©å¤ç§‘æŠ€", extra_en: "Victorian era, gears, steam power, retro technology" },
                { zh: "æ°´å½©ç•«", en: "Watercolor painting", extra_zh: "é€æ˜æ„Ÿ, æ¿•ç•«æ³•, æ¸²æŸ“, æŸ”å’Œè‰²å½©", extra_en: "Transparent, wet-on-wet, washes, soft colors" },
                { zh: "æ²¹ç•«", en: "Oil painting", extra_zh: "åšå¡—, ç­†è§¸ç´‹ç†, ç¶“å…¸, è±å¯Œè‰²å½©", extra_en: "Impasto, textured brushstrokes, classic, rich colors" },
                { zh: "ç´ æ", en: "Sketch", extra_zh: "ç·šæ¢ç•«, è¼ªå»“, æœªå®Œæˆæ„Ÿ, é€Ÿå¯«", extra_en: "Line art, outline, unfinished look, quick sketch" },
                { zh: "é»åœŸé¢¨", en: "Claymation / Clay style", extra_zh: "æ‰‹å·¥æ„Ÿ, æŒ‡ç´‹ç—•è·¡, 3D, å®šæ ¼å‹•ç•«", extra_en: "Handmade look, fingerprints, 3D, stop motion" },
                { zh: "å‰ªç´™é¢¨", en: "Papercut style / Kirigami", extra_zh: "å±¤æ¬¡æ„Ÿ, å‰ªå½±, ç°¡æ½”, å‚³çµ±è—è¡“", extra_en: "Layered, silhouette, clean, traditional art" },
                { zh: "åƒç´ é¢¨", en: "Pixel art", extra_zh: "8-bit, 16-bit, å¾©å¤éŠæˆ², é»é™£åœ–", extra_en: "8-bit, 16-bit, retro gaming, raster graphics" },
                { zh: "ä¸­åœ‹æ°´å¢¨é¢¨", en: "Chinese ink wash painting", extra_zh: "ç•™ç™½, å¢¨éŸ», æ„å¢ƒ, æ›¸æ³•ç·šæ¢", extra_en: "Negative space, ink diffusion, artistic conception (yijing), calligraphic lines" },
                { zh: "æ—¥å¼æµ®ä¸–ç¹ª", en: "Ukiyo-e style", extra_zh: "æœ¨åˆ»ç‰ˆç•«, è‘›é£¾åŒ—é½‹, ç·šæ¢æ¸…æ™°, å’Œé¢¨", extra_en: "Woodblock print, Hokusai, clear outlines, Japanese style" },
                { zh: "å¡é€šé¢¨æ ¼", en: "Cartoon style", extra_zh: "ç²—ç·šæ¢, èª‡å¼µè¡¨æƒ…, ç°¡å–®ä¸Šè‰², å¹½é»˜", extra_en: "Bold outlines, exaggerated expressions, simple coloring, humorous" },
                { zh: "å‹•æ¼«é¢¨æ ¼", en: "Anime style", extra_zh: "æ—¥å¼å‹•ç•«, å¤§çœ¼ç›, è³½ç’ç’é¢¨æ ¼, æ¼«ç•«æ„Ÿ", extra_en: "Japanese animation, big eyes, cel shading, manga style" },
                { zh: "3Dæ¸²æŸ“", en: "3D render", extra_zh: "Octaneæ¸²æŸ“, Blender, C4D, å…‰ç·šè¿½è¹¤, è¶…çœŸå¯¦", extra_en: "Octane render, Blender, C4D, ray tracing, hyperrealistic" },
                { zh: "çš®å…‹æ–¯é¢¨æ ¼", en: "Pixar style", extra_zh: "3Då‹•ç•«, å¯æ„›è§’è‰², æƒ…æ„Ÿè±å¯Œ, æ•…äº‹æ„Ÿ", extra_en: "3D animation, cute characters, expressive, storytelling" },
                { zh: "æ¢µé«˜é¢¨æ ¼", en: "Van Gogh style", extra_zh: "æ˜Ÿå¤œ, å‘æ—¥è‘µ, åšå¡—ç­†è§¸, æ¼©æ¸¦ç‹€", extra_en: "The Starry Night, sunflowers, impasto brushstrokes, swirling" },
                { zh: "å®®å´é§¿é¢¨æ ¼", en: "Hayao Miyazaki / Ghibli style", extra_zh: "å‹•ç•«é›»å½±, å¤©ç©ºä¹‹åŸ, é¾è²“, æ°´å½©èƒŒæ™¯", extra_en: "Anime film, Castle in the Sky, Totoro, watercolor background" },
            ],
            composition: [
                { zh: "ä¸‰åˆ†æ³•æ§‹åœ–", en: "Rule of thirds composition", extra_zh: "ä¸»é«”åé›¢ä¸­å¿ƒ, å¹³è¡¡æ„Ÿ, å¼•å°è¦–ç·š", extra_en: "Subject off-center, balanced composition, leading the eye" },
                { zh: "é»ƒé‡‘åˆ†å‰²æ§‹åœ–", en: "Golden ratio composition", extra_zh: "æ–æ³¢é‚£å¥‘èºæ—‹, è‡ªç„¶å’Œè«§, ç¾å­¸", extra_en: "Fibonacci spiral, natural harmony, aesthetic" },
                { zh: "å°ç¨±æ§‹åœ–", en: "Symmetrical composition", extra_zh: "å®Œç¾å¹³è¡¡, é¡åƒ, ç©©å®šæ„Ÿ, å»ºç¯‰æ”å½±", extra_en: "Perfectly balanced, mirror image, sense of stability, architectural photography" },
                { zh: "å¼•å°ç·šæ§‹åœ–", en: "Leading lines composition", extra_zh: "é“è·¯, æ²³æµ, æ¨“æ¢¯, å¼•å°è¦–ç·šè‡³ä¸»é«”", extra_en: "Road, river, stairs, directs viewer's eye to the subject" },
                { zh: "æ¡†æ¶æ§‹åœ–", en: "Framing composition", extra_zh: "é€éçª—æˆ¶/é–€/æ¨¹æçœ‹, å¢åŠ æ·±åº¦", extra_en: "View through a window/door/branches, adds depth" },
                { zh: "å°è§’ç·šæ§‹åœ–", en: "Diagonal composition", extra_zh: "å¢åŠ å‹•æ„Ÿ, æ´»åŠ›, ä¸ç©©å®šæ„Ÿ", extra_en: "Adds movement, energy, sense of instability" },
                { zh: "ä¸‰è§’å½¢æ§‹åœ–", en: "Triangle composition", extra_zh: "ç©©å®š, åŠ›é‡æ„Ÿ, äººç‰©ç«™å§¿", extra_en: "Stability, strength, character poses" },
                { zh: "ç•™ç™½", en: "Negative space", extra_zh: "æ¥µç°¡, çªå‡ºä¸»é«”, å¹³éœæ„Ÿ, å»£é—Šå¤©ç©º", extra_en: "Minimalist, emphasizes subject, sense of peace, vast sky" },
                { zh: "ä¸­å¤®æ§‹åœ–", en: "Centered composition", extra_zh: "ä¸»é«”åœ¨æ­£ä¸­, å¼·èª¿, æ­£å¼æ„Ÿ, å°ç¨±", extra_en: "Subject in the exact middle, emphasis, formal, symmetrical" },
                { zh: "Så‹æ§‹åœ–", en: "S-curve composition", extra_zh: "èœ¿èœ’çš„é“è·¯/æ²³æµ, å„ªé›…, æµå‹•æ„Ÿ", extra_en: "Winding road/river, graceful, sense of flow" },
            ],
            shotType: [
                { zh: "è¶…å¤§é æ™¯", en: "Extreme long shot", extra_zh: "å»£é—Šé¢¨æ™¯, äººç‰©å¹¾ä¹çœ‹ä¸è¦‹, äº¤ä»£ç’°å¢ƒ", extra_en: "Vast landscape, figures barely visible, establishing environment" },
                { zh: "é æ™¯", en: "Long shot", extra_zh: "èƒ½çœ‹æ¸…äººç‰©, ä½†ç’°å¢ƒä»æ˜¯é‡é»", extra_en: "Figure is visible, but environment is still the focus" },
                { zh: "å…¨æ™¯", en: "Full shot", extra_zh: "å®Œæ•´äººç‰©å¾é ­åˆ°è…³, å¼·èª¿å‹•ä½œå’Œæœè£", extra_en: "Full body from head to toe, emphasizes action and costume" },
                { zh: "ä¸­æ™¯", en: "Medium shot", extra_zh: "äººç‰©è…°éƒ¨ä»¥ä¸Š, å¸¸ç”¨æ–¼å°è©±å ´æ™¯", extra_en: "Shows subject from the waist up, common for dialogue scenes" },
                { zh: "ä¸­è¿‘æ™¯", en: "Medium close-up", extra_zh: "äººç‰©èƒ¸éƒ¨ä»¥ä¸Š, æ›´èšç„¦æ–¼è¡¨æƒ…", extra_en: "Frames from chest up, focuses more on facial expression" },
                { zh: "è¿‘æ™¯", en: "Close-up", extra_zh: "äººç‰©è‚©éƒ¨ä»¥ä¸Š, å¼·èª¿è‡‰éƒ¨å’Œæƒ…æ„Ÿ", extra_en: "Frames the subject's shoulders and up, emphasizes face and emotion" },
                { zh: "ç‰¹å¯«", en: "Extreme close-up", extra_zh: "è‡‰éƒ¨çš„å±€éƒ¨, å¦‚çœ¼ç›æˆ–å˜´å·´, å¼·çƒˆæƒ…æ„Ÿ", extra_en: "A part of the face, like an eye or mouth, intense emotion" },
                { zh: "å¾®è·é¡é ­", en: "Macro shot", extra_zh: "æ¥µè‡´ç´°ç¯€, æ˜†èŸ², æ°´æ»´, çº–ç¶­", extra_en: "Extreme detail, insects, water drops, fibers" },
            ],
            angle: [
                { zh: "ä¿¯è¦–", en: "High-angle view", extra_zh: "å¾ä¸Šå¾€ä¸‹æ‹, é¡¯å¾—ä¸»é«”æ¸ºå°/è„†å¼±", extra_en: "Shot from above, makes subject look small/vulnerable" },
                { zh: "é³¥ç°", en: "Bird's-eye view", extra_zh: "æ­£ä¸Šæ–¹è¦–è§’, èˆªæ‹, ç„¡äººæ©Ÿé¡é ­", extra_en: "Directly overhead view, aerial shot, drone shot" },
                { zh: "ä»°è¦–", en: "Low-angle view", extra_zh: "å¾ä¸‹å¾€ä¸Šæ‹, é¡¯å¾—ä¸»é«”é«˜å¤§/æœ‰åŠ›é‡", extra_en: "Shot from below, makes subject look tall/powerful" },
                { zh: "å¹³è¦–", en: "Eye-level view", extra_zh: "èˆ‡ä¸»é«”çœ¼ç›åŒé«˜, è¦ªåˆ‡æ„Ÿ, è‡ªç„¶, å»ºç«‹è¯ç¹«", extra_en: "Eye-level shot, same height as subject, intimate, natural, establishes connection" },
                { zh: "å‚¾æ–œ", en: "Dutch angle / Canted angle", extra_zh: "å‚¾æ–œé¡é ­, è£½é€ ä¸å®‰/ç˜‹ç‹‚/å‹•æ„Ÿ", extra_en: "Tilted camera, creates unease/madness/dynamism" },
                { zh: "æ­£é¢è¦–è§’", en: "Front view", extra_zh: "ç›´æ¥é¢å°ä¸»é«”, å°ç¨±, æ­£å¼", extra_en: "Directly facing the subject, symmetrical, formal" },
                { zh: "èƒŒé¢è¦–è§’", en: "View from behind", extra_zh: "è·Ÿéš¨æ„Ÿ, ç¥ç§˜, è§€çœ‹é¢¨æ™¯", extra_en: "Sense of following, mystery, watching a scene" },
                { zh: "éè‚©è¦–è§’", en: "Over-the-shoulder shot", extra_zh: "å°è©±å ´æ™¯, å¸¶å…¥æ„Ÿ, ç¬¬ä¸‰äººç¨±", extra_en: "Dialogue scene, immersive, third-person perspective" },
                { zh: "ä¸»è§€è¦–è§’", en: "Point of view (POV)", extra_zh: "ç¬¬ä¸€äººç¨±è¦–è§’, æ²‰æµ¸å¼é«”é©—, éŠæˆ²æ„Ÿ", extra_en: "First-person perspective, immersive experience, game-like" },
            ]
        };

        const categoryTitles = {
            style: { zh: "ğŸ¨ é¢¨æ ¼æç¤ºè©", en: "ğŸ¨ Style Prompts" },
            composition: { zh: "ğŸ“ æ§‹åœ–æç¤ºè©", en: "ğŸ“ Composition Prompts" },
            shotType: { zh: "ğŸ“· æ™¯åˆ¥æç¤ºè©", en: "ğŸ“· Shot Type Prompts" },
            angle: { zh: "ğŸ§­ è§’åº¦æç¤ºè©", en: "ğŸ§­ Angle Prompts" }
        };

        // --- DOM å…ƒç´  ---
        const langToggle = document.getElementById('langToggle');
        const studentIdInput = document.getElementById('studentIdInput');
        const assignBtn = document.getElementById('assignBtn');
        const assignmentResult = document.getElementById('assignmentResult');
        const promptGuideContainer = document.getElementById('promptGuideContainer');

        let currentLang = 'zh';

        // --- å‡½æ•¸ ---

        /**
         * æ¸²æŸ“æ‰€æœ‰æç¤ºè©å¡ç‰‡
         */
        function renderAllPrompts() {
            let html = '';
            for (const category in promptsData) {
                html += `
                    <section id="${category}" class="mb-12">
                        <h2 class="text-2xl font-bold text-slate-800 mt-8 mb-4 border-b-2 pb-2 border-slate-200">
                            <span class="lang-zh">${categoryTitles[category].zh}</span>
                            <span class="lang-en">${categoryTitles[category].en}</span>
                        </h2>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                `;
                promptsData[category].forEach(prompt => {
                    html += `
                        <div class="bg-white p-4 rounded-xl shadow-sm hover:shadow-lg transition-all border border-slate-100 flex flex-col justify-between">
                            <div>
                                <h3 class="font-bold text-lg text-blue-800">
                                    <span class="lang-zh">${prompt.zh}</span>
                                    <span class="lang-en">${prompt.en}</span>
                                </h3>
                                <p class="text-slate-600 text-sm mt-1">
                                    <span class="lang-zh">${prompt.extra_zh}</span>
                                    <span class="lang-en">${prompt.extra_en}</span>
                                </p>
                            </div>
                            <div class="mt-4 flex gap-2">
                                <button class="copy-btn text-xs bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold py-1 px-3 rounded-full transition w-full" data-lang="zh">è¤‡è£½ä¸­æ–‡</button>
                                <button class="copy-btn text-xs bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold py-1 px-3 rounded-full transition w-full" data-lang="en">Copy English</button>
                            </div>
                        </div>
                    `;
                });
                html += `</div></section>`;
            }
            promptGuideContainer.innerHTML = html;
            updateLanguageDisplay();
        }

        /**
         * æ›´æ–°é é¢èªè¨€é¡¯ç¤º
         */
        function updateLanguageDisplay() {
            const isEnglish = langToggle.checked;
            currentLang = isEnglish ? 'en' : 'zh';

            document.querySelectorAll('.lang-zh').forEach(el => el.style.display = isEnglish ? 'none' : 'inline');
            document.querySelectorAll('.lang-en').forEach(el => el.style.display = isEnglish ? 'inline' : 'none');
            document.querySelectorAll('.copy-btn[data-lang="zh"]').forEach(el => el.style.display = isEnglish ? 'none' : 'inline-block');
            document.querySelectorAll('.copy-btn[data-lang="en"]').forEach(el => el.style.display = isEnglish ? 'inline-block' : 'none');
        }

        /**
         * ä¿®æ”¹ï¼šè™•ç†åˆ†é…æç¤ºè©çš„é‚è¼¯
         */
        function handleAssignment() {
            const studentId = parseInt(studentIdInput.value);
            if (isNaN(studentId) || studentId < 1 || studentId > 18) {
                assignmentResult.innerHTML = `<p class="text-red-600 font-semibold">è«‹è¼¸å…¥æœ‰æ•ˆçš„å­¸è™Ÿ (1 åˆ° 18 ä¹‹é–“)ã€‚</p>`;
                return;
            }

            let resultHtml = `
                <div class="relative bg-blue-50 border border-blue-200 rounded-lg p-4 pt-8">
                    <!-- æ–°å¢ï¼šæ”¶èµ·æŒ‰éˆ• -->
                    <button id="closeAssignmentBtn" class="absolute top-2 right-2 text-slate-500 hover:text-slate-800 transition">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                    <h3 class="font-bold text-blue-800 mb-4">
                        <span class="lang-zh">${studentId}è™ŸåŒå­¸ï¼Œé€™æ˜¯ä½ çš„å°ˆå±¬å‰µä½œä»»å‹™ (å…±20é …)ï¼š</span>
                        <span class="lang-en">Student #${studentId}, here are your unique creative assignments (20 total):</span>
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4">
            `;

            const categories = ['style', 'composition', 'shotType', 'angle'];
            const categorySeeds = [7, 11, 13, 17]; // ä½¿ç”¨è³ªæ•¸ä½œç‚ºç¨®å­å¢åŠ éš¨æ©Ÿæ€§

            categories.forEach((cat, j) => {
                const categoryArray = promptsData[cat];
                resultHtml += `<div>
                                <h4 class="font-semibold text-slate-700 border-b border-slate-300 mb-2 pb-1">
                                    <span class="lang-zh">${categoryTitles[cat].zh}</span>
                                    <span class="lang-en">${categoryTitles[cat].en}</span>
                                </h4>
                                <ul class="list-disc list-inside space-y-1">`;
                
                let usedIndices = new Set();
                for (let i = 0; i < 5; i++) {
                    let index;
                    // ç¢ºä¿æ¯å€‹åˆ†é¡çš„5å€‹æç¤ºè©ä¸é‡è¤‡
                    do {
                        // æ¼”ç®—æ³•ï¼š(å­¸è™Ÿ + ä»»å‹™åºè™Ÿ*è³ªæ•¸ç¨®å­ + é¡åˆ¥åºè™Ÿ*è³ªæ•¸ç¨®å­) % è©²é¡åˆ¥ç¸½æ•¸
                        index = (studentId + i * categorySeeds[j] + j * 5) % categoryArray.length;
                    } while (usedIndices.has(index) && usedIndices.size < categoryArray.length);
                    
                    usedIndices.add(index);
                    const selectedPrompt = categoryArray[index];
                    
                    resultHtml += `<li>
                                    <span class="lang-zh">${selectedPrompt.zh}</span>
                                    <span class="lang-en">${selectedPrompt.en}</span>
                                </li>`;
                }
                resultHtml += `</ul></div>`;
            });

            resultHtml += `</div></div>`;
            assignmentResult.innerHTML = resultHtml;
            // ç‚ºæ–°çš„é—œé–‰æŒ‰éˆ•æ·»åŠ äº‹ä»¶ç›£è½å™¨
            document.getElementById('closeAssignmentBtn').addEventListener('click', () => {
                assignmentResult.innerHTML = '';
            });
            updateLanguageDisplay();
        }
        
        /**
         * è™•ç†è¤‡è£½åˆ°å‰ªè²¼ç°¿
         */
        function handleCopy(e) {
            if (!e.target.classList.contains('copy-btn')) return;

            const button = e.target;
            const lang = button.dataset.lang;
            const card = button.closest('div.flex-col');
            
            const mainPromptEl = card.querySelector(`h3 > .lang-${lang}`);
            const extraPromptEl = card.querySelector(`p > .lang-${lang}`);
            
            const textToCopy = `${mainPromptEl.textContent}, ${extraPromptEl.textContent}`;

            const textArea = document.createElement("textarea");
            textArea.value = textToCopy;
            textArea.style.position = "fixed";
            textArea.style.left = "-9999px";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            try {
                document.execCommand('copy');
                button.classList.add('copy-feedback', 'show');
                setTimeout(() => {
                    button.classList.remove('show');
                    setTimeout(() => button.classList.remove('copy-feedback'), 300);
                }, 1500);
            } catch (err) {
                console.error('ç„¡æ³•è¤‡è£½æ–‡å­—: ', err);
            }
            document.body.removeChild(textArea);
        }

        // --- äº‹ä»¶ç›£è½å™¨ ---
        langToggle.addEventListener('change', updateLanguageDisplay);
        assignBtn.addEventListener('click', handleAssignment);
        promptGuideContainer.addEventListener('click', handleCopy);

        // --- åˆå§‹è¼‰å…¥ ---
        renderAllPrompts();

    </script>
</body>
</html>
